<!doctype html>

<script src="/node_modules/systemjs/dist/system-register-only.js"></script>
<script>
  navigator.serviceWorker.onerror = function(e){
    console.error(e);
  }
  navigator.serviceWorker.register('./service-worker.js').then(function(reg) {
    console.log('Service worker registered');
    console.log(reg.waiting, reg.installing, reg.active);

    console.log('import');
    System.import('modules/mymodule.js').then(function(m) {
      new m.q();
    }, e => console.error(e.message, e.stack));
  }, e => console.error(e));

  function unregister(){
    navigator.serviceWorker.getRegistrations().then(function(regs){
      regs.forEach(function(reg){
        console.log('Service worker unregistered', reg);
        reg.unregister();
      });
    });
  }
</script>

<a href="page2.html">Page2</a>
<button type="button" onclick="unregister()">Unregister</button>